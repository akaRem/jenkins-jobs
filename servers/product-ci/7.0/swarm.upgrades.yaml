- job-group:
    name: '7.0-system_tests-upgrades'
    version-id: '7.0'
    id: 'system_test'
    node: 'systest'
    timeout: '480'
    base_reponame: 'fuel-qa'
    base_repobranch: 'origin/stable/6.1'
    base_iso_magnet_link:
        !include-raw ../data/6.1-iso
    upgrade_reponame: 'fuel-qa'
    upgrade_repobranch: 'origin/master'
    properties: |
      KEYSTONE_PASSWORD=newpass
      SLAVE_NODE_MEMORY=3072
    weight: '8'
    jobs:
      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'ceph_ha_one_controller_compact'
          upgrade_testgroup:
            - 'upgrade_one_controller'

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'os_upgrade'
          weight: '20'
          node: 'huge-systest'
          upgrade_testgroup:
            - 'os_upgrade'

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'ceph_ha_one_controller_compact'
          upgrade_testgroup:
            - 'upgrade_ha_one_controller'
            - 'upgrade_ha_one_controller_delete_node'
          properties: |
            UPDATE_MASTER=true

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'ceph_ha_one_controller_compact'
          upgrade_testgroup:
            - 'upgrade_one_controller_classic'
          properties: |
            CLASSIC_PROVISIONING=true
            UPDATE_MASTER=true

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'ceph_ha_one_controller_compact_neutron'
          upgrade_testgroup:
            - 'upgrade_one_controller_neutron'
            - 'rollback_one_controller'
          properties: |
            NEUTRON_ENABLE=true
            UPDATE_MASTER=true

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'rollback_automatically_delete_node'
          upgrade_testgroup:
            - 'rollback_neutron_gre'
          properties: |
            UPDATE_MASTER=true

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'deploy_neutron_gre_ha'
          upgrade_testgroup:
            - 'upgrade_neutron_gre_ha'
            - 'rollback_neutron_gre_ha'
          properties: |
            UPDATE_MASTER=true

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'ceph_rados_gw'
          upgrade_testgroup:
            - 'upgrade_neutron_ceph'
          properties: |
            NEUTRON_ENABLE=true

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'ceph_rados_gw'
          upgrade_testgroup:
            - 'upgrade_neutron_ceph_classic'
          properties: |
            NEUTRON_ENABLE=true
            CLASSIC_PROVISIONING=true

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'deploy_multirole_compute_cinder'
          upgrade_testgroup:
            - 'upgrade_nova_cinder'

      - '{version-id}.{id}.{dist}.{upgrade_testgroup}':
          testgroup: 'deploy_multirole_compute_cinder'
          upgrade_testgroup:
            - 'upgrade_nova_cinder_classic'
          properties: |
            CLASSIC_PROVISIONING=true

- job-group:
    name: '7.0-system_tests-upgradechain'
    version-id: '7.0'
    id: 'system_test'
    node: 'systest'
    timeout: '480'
    base_reponame: 'fuel-main'
    base_repobranch: 'origin/stable/6.0'
    base_iso_magnet_link:
        !include-raw ../data/6.0-iso
    base_venv_path: '/home/jenkins/venv-nailgun-tests'
    old_devops_db: 'true'
    base_upgraded_reponame: 'fuel-qa'
    base_upgraded_repobranch: 'origin/stable/6.1'
    upgrade_reponame: 'fuel-qa'
    upgrade_repobranch: 'origin/master'
    properties: ''
    jobs:
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}.uc':
          testgroup: 'deploy_neutron_gre_ha'
          upgrade_testgroup: 'upgrade'
          properties: |
            KEYSTONE_PASSWORD=newpass
          weight: '8'
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}.uc':
          testgroup: 'ceph_multinode_compact'
          upgrade_testgroup: 'upgrade'
          weight: '8'
          properties: |
            KEYSTONE_PASSWORD=newpass
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}.uc':
          testgroup: 'ceph_multinode_compact_neutron'
          upgrade_testgroup: 'upgrade'
          properties: |
            NEUTRON_ENABLE=true
          weight: '8'
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}.uc':
          testgroup: 'deploy_neutron_gre_ha'
          upgrade_testgroup: 'rollback'
          properties: |
            KEYSTONE_PASSWORD=newpass
          weight: '8'
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}.uc':
          testgroup: 'deploy_neutron_gre'
          upgrade_testgroup: 'rollback'
          properties: |
            KEYSTONE_PASSWORD=newpass
          weight: '8'
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}.uc':
          testgroup: 'ceph_multinode_compact_neutron'
          upgrade_testgroup: 'rollback'
          properties: |
            NEUTRON_ENABLE=true
          weight: '8'
