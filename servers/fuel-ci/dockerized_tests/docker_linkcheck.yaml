- project:
    name: 'fuel-linkcheck'
    docker_image: 'linkcheck'
    test_variables: |
      ENVVARS='-e PREFIX=fuel-web -e REQUIREMENTS={requirements} -e MAKEDIR={makedir} -e REGEX={exclude_regex}'
    timed: 'H 1 * * *'
    scm:
      - gerrit-openstack:
          repo: '{gerrit_project_pattern}'
    gerrit_branches:
      - branch-compare-type: ANT
        branch-pattern: '**'
    gerrit_trigger_on:
      - patchset-created-event
    publishers:
      - archive:
          artifacts: 'build_*.txt'
          allow-empty: 'true'
          fingerpring: true
    wrappers:
      - ansicolor:
          colormap: css
      - timeout:
          fail: true
          timeout: 30
    jobs:
      - 'dockerized-{name}':
          name: 'docker-fuel-web-linkcheck'
          volumes: '$WORKSPACE:/opt/jenkins/fuel-web'
          gerrit_project_pattern: 'openstack/fuel-web'
          requirements: 'nailgun/test-requirements.txt'
          exclude_regex: 'working|redirected'
          makedir: 'docs'

      - 'dockerized-{name}':
          name: 'docker-fuel-docs-linkcheck'
          volumes: '$WORKSPACE:/opt/jenkins/fuel-docs'
          gerrit_project_pattern: 'openstack/fuel-docs'
          requirements: 'requirements.txt'
          exclude_regex: 'ok|redirect'
          makedir: '.'