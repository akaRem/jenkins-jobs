#
# Project definitions
#

- fuel_template: &fuel_template
    name: ''

    project-name: 'openstack'

    repo-host: 'packages.fuel-infra.org'

    base-path: 'base/'
    updates-path: 'updates/'
    security-path: 'security/'

    cr-path-prefix: 'review/'

    deb-origin-release: 'OpenStack'
    deb-origin-test: 'testing'

    deb-dist-name: '{project-version}-{distro}'
    deb-repo-path: '/repositories/ubuntu/{project-version}-{distro}'
    rpm-repo-path: '/repositories/centos/{project-version}-{distro}'

    repo-base-path: '/home/jenkins/pubrepos'

    pkg-sign-key: '1FA22B08'

    spec-path-prefix: ''
    spec-path-suffix: '-build'
    spec-project-prefix: ''
    spec-project-suffix: '-build'

    # Parameters for install-test
    install-scm-repo: 'infra/ci-test-request'
    install-scm-branch: 'origin/master'

    # Job slave nodes
    build-node: 'new-builder'
    publish-node: 'new-publisher'
    install-node: 'install-node'
    systest-node: 'systest'

    jobs:
      - '{project-version}-{name}-build-{distro}'
      - '{project-version}-{name}-publish-{distro}'
      - '{project-version}-{name}-install-{distro}'
      - '{project-version}-{name}-repotest-{distro}'
      - '{project-version}-{name}-systest-{distro}'

- project:
    name: 'fuel-pkg'
    <<: *fuel_template
    project-version:
      - 'master':
          # Enables patching workflow
          is_updates: 'false'
          # Build requirements
          mos-deb-dist-name: 'mos-master'
          mos-deb-repo-path: '/mos-repos/ubuntu/master'
          mos-rpm-repo-path: '/mos-repos/centos/mos-master-centos7'
      - 'mitaka':
          # Enables patching workflow
          is_updates: 'false'
          # Build requirements
          mos-deb-dist-name: 'mos9.0'
          mos-deb-repo-path: '/mos-repos/ubuntu/9.0'
          mos-rpm-repo-path: '/mos-repos/centos/mos9.0-centos7'
      - 'liberty':
          # Enables patching workflow
          is_updates: 'true'
          # Build requirements
          mos-deb-dist-name: 'mos8.0'
          mos-deb-repo-path: '/mos-repos/ubuntu/8.0'
          mos-rpm-repo-path: '/mos-repos/centos/mos8.0-centos7-fuel'
    distro:
      - centos7:
          os: centos
          openstack_release: 'ubuntu'
          pkg_type: 'rpm'
          spec_path_prefix: '/rpm'
      - trusty:
          os: ubuntu
          openstack_release: 'ubuntu'
          pkg_type: 'deb'
          spec_path_prefix: '/trusty'
