- job-template:
    name: '{release}.patching.{test_name}'
    project-type: freestyle
    disabled: '{is-disabled}'
    concurrent: false
    logrotate:
      daysToKeep: 100
    properties:
      - heavy-job:
          weight: 8
    wrappers:
      - ansicolor:
          colormap: xterm
      - timeout:
          fail: true
          timeout: 600
          write-description: true
      - '{reviewer}'
    parameters:
      - string:
          name: fuelqa_gerrit_commit
          default: 'none'
      - string:
          name: patchingtests_gerrit_commit
          default: 'none'
      - string:
          name: BUG_ID
          default: ''
      - string:
          name: MAGNET_LINK
          default: ''
      - string:
          name: FUEL_MILESTONE
          default: '{release}'
      - string:
          name: TEST_GROUP
          default: '{testgroup}'
      - string:
          name: DIST_NAME
          default: '{distname}'
      - string:
          name: OSCI_OBS_REPOS_CENTOS
          default: 'http://osci-obs.vm.mirantis.net:82'
      - string:
          name: OSCI_OBS_REPOS_UBUNTU
          default: 'http://obs-1.mirantis.com:82'
      - string:
          name: REPOS_SUFFIX
          default: 'stable-updates'
      - string:
          name: KEEP_BEFORE
          default: 'yes'
      - string:
          name: GERRIT_REVIEWER
          default: '{reviewer}'
      - string:
          name: PYTHON_VENV
          default: '/home/jenkins/venv-nailgun-tests-2.9/'
      - string:
          name: GERRIT_HOST1
          default: ''
      - string:
          name: GERRIT_HOST2
          default: ''
      - string:
          name: GERRIT_CHANGES_NUMBERS1
          default: ''
      - string:
          name: GERRIT_CHANGES_NUMBERS2
          default: ''
      - string:
          name: GERRIT_HOSTS_COUNT
          default: '2'
      - string:
          name: CUSTOM_TESTS
          default: '2'
      - string:
          name: PATCHING_DISABLE_UPDATES
          default: '{disable_updates}'
      - string:
          name: ENABLE_VAR
          default: '{enablevar}'
      - string:
          name: ENABLE_CUSTOM_VAR
          default: '{enable_custom_var}'
      - string:
          name: ENABLED_RPM_PATCHING
          default: 'true'
      - string:
          name: ENABLED_CENTOS_MASTER_PATCHING
          default: 'true'
      - string:
          name: ENABLED_RPM_GA_PATCHING
          default: 'true'
      - string:
          name: ENABLED_CENTOS_MASTER_GA_PATCHING
          default: 'true'
      - string:
          name: ENABLED_DEB_PATCHING
          default: 'true'
      - string:
          name: ENABLED_UBUNTU_MASTER_PATCHING
          default: 'true'
      - string:
          name: ENABLED_DEB_GA_PATCHING
          default: 'true'
      - string:
          name: ENABLED_UBUNTU_MASTER_GA_PATCHING
          default: 'true'
      - string:
          name: ENABLED_ENV_CUSTOM_TESTS
          default: 'true'
      - string:
          name: ENABLED_MASTER_CUSTOM_TESTS
          default: 'true'
    scm:
      - git:
          url: 'https://github.com/openstack/fuel-qa.git'
          branches:
            - 'origin/stable/7.0'
          skip-tag: true
          basedir: fuel-qa
      - patching-tests
    builders:
      - logs-url
      - shell:
          !include-raw-escape: builders/mos.test.patching.fetch_gerrit_commits.sh
      - shell:
          !include-raw-escape: builders/mos.test.patching.sh
    publishers:
      - nosetests
      - publish_to_external
