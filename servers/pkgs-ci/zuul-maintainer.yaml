- job-template:
    name: 'zuul-maintainer'
    project-type: freestyle
    concurrent: false
    description: |
        This job works as 'all in one' tool for managing 'Zuul'.
        Pick and run it with desired action as parameter.
    node: '{build-node}'

    properties:
      - heavy-job:
          weight: 1

    wrappers:
      - ssh-agent-credentials:
          users:
            - '{ssh-creds-openstack-ci-jenkins}'
            - '{ssh-creds-unknown-1}'
            - '{ssh-creds-unknown-2}'
      - build-timeout:
          timeout: 10
    scm:
      - fuel-infra:
          scm-user: '{username-openstack-ci-jenkins}'
          scm-repo: '{scm-repo}'
          scm-basedir: '{scm-basedir}'
          scm-credentials-id: '{ssh-creds-openstack-ci-jenkins}'
          scm-branch: '{scm-branch}'

    triggers:
     - timed: '*/15 * * * *'
     - zuul

    builders:
      - shell:
          !include-raw-escape builders/zuul-maintainer.sh

# uncomment when will be ready:
    publishers:
#      - email:
#          recipients: '{mailto}'
#          notify-every-unstable-build: false
#          send-to-individuals: false
        - archive:
            artifacts: 'build/**/*'
            allow-empty: true
