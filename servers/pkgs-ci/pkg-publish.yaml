- job-template:
    name: '{mos_version}-pkg-publish-{os}'
    project-type: freestyle
    concurrent: false
    quiet-period: 60
    properties:
      - inject:
          properties-content: |
            REPO_BASE_PATH={repo-base-path}
            SIGKEYID={pkg-sign-key}
    parameters:
      - string:
          name: PROJECT_NAME
          default: '{project-name}'
      - string:
          name: PROJECT_VERSION
          default: '{mos_version}'
      - bool:
          name: IS_UPDATES
      - bool:
          name: RESYNC_ONLY
          default: false
    wrappers:
      - jenkins
      - timestamps
      - ansicolor
    triggers:
      - zuul
    scm:
      - fuel-infra:
          scm-user: '{scm-user}'
          scm-repo: '{scm-repo}'
          scm-basedir: '{scm-basedir}'
          scm-credentials-id: '{scm-credentials-id}'
          scm-branch: '{scm-branch}'
    builders:
        - shell: /bin/bash -xe publisher.v5/publish-{pkg_type}-binaries.sh
    publishers:
      - archive:
           artifacts: '*.publish.setenvfile'
           allow-empty: true

    node: '{publish-node}'
