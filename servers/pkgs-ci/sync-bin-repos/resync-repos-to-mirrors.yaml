- project:
    name: 'resync-repos-to-mirrors'
    repo-host: 'perestroika-repo-tst.infra.mirantis.net'

    trsync-node: 'mirror-sync'
    trsync-scm-repo: 'infra/trsync'
    trsync-scm-branch: 'master'
    trsync-scm-basedir: 'trsync'
    mailto: 'fuel-build+ci-packaging@mirantis.com'

    # doesn't run by timer if not set verbosely
    schedule: ''

    # default auth rules - ci only, add maintenance-mgmt after crsp GA
    authorization:
      ci:
        - job-read
        - job-build

    mos_version:

      - '8.0':
          authorization:
            maintenance-mgmt:
              - job-read
              - job-build
            ci:
              - job-read
              - job-build
          srcpaths: |
            mos-repos/centos/mos8.0-centos7-fuel/os
            mos-repos/centos/mos8.0-centos7-fuel/proposed
            mos-repos/centos/mos8.0-centos7-fuel/updates
            mos-repos/centos/mos8.0-centos7-fuel/security
            mos-repos/centos/mos8.0-centos7-fuel/holdback
            mos-repos/ubuntu/8.0

      - '9.0':
          schedule: 'H H/12 * * *'
          srcpaths: |
            mos-repos/centos/mos9.0-centos7/os
            mos-repos/centos/mos9.0-centos7/proposed
            mos-repos/centos/mos9.0-centos7/updates
            mos-repos/centos/mos9.0-centos7/security
            mos-repos/centos/mos9.0-centos7/holdback
            mos-repos/ubuntu/9.0

      - master:
          schedule: 'H H/12 * * *'
          srcpaths: |
            mos-repos/xenial/master

    jobs:
      - '{mos_version}.resync-repos-to-mirrors'