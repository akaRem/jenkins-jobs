#
# Project definitions
#

- common_template: &common_template
    name: ''

    project-name: 'mos'

    master-mos-version: '9.0'

    repo-host: 'perestroika-repo-tst.infra.mirantis.net'

    product_jenkins_url: 'https://product-ci.infra.mirantis.net/'

    base-path: 'base/'
    updates-path: 'updates/'
    security-path: 'security/'

    cr-path-prefix: 'review/'
    rel-path-prefix: 'mos-repos/'

    repo-base-path: '/home/jenkins/pubrepos'

    pkg-sign-key: '1FA22B08'

    scm-user: 'openstack-ci-jenkins'
    scm-credentials-id: 'a2a7e956-9dc7-4eb1-b396-ba981c2a8c81'

    fuel-namespace: 'openstack'

    install-scm-repo: 'infra/ci-test-request'
    install-scm-branch: 'origin/master'

    scm-ci-status-client-repo: 'infra/ci-status-client'
    scm-ci-status-client-branch: '8.0'
    scm-ci-status-client-basedir: 'ci-status-client'

    spec-path-prefix: ''
    spec-path-suffix: '-build'
    spec-project-prefix: ''
    spec-project-suffix: '-build'

    # Job slave nodes
    build-node: 'new-builder'
    publish-node: 'new-publisher'
    install-node: 'install-node'
    systest-node: 'systest'

- gerrit_params: &gerrit_params
    name: ''

    gerrit-host: 'review.fuel-infra.org'
    gerrit-user: 'openstack-ci-jenkins'
    gerrit-port: '29418'

- mos_gerrit_template: &mos_template
    name: ''

    gerrit-host: 'review.fuel-infra.org'
    gerrit-user: 'openstack-ci-jenkins'
    gerrit-port: '29418'

    jobs:
      - '{mos_version}-pkg-pipeline-{os}'
      - '{mos_version}-pkg-publish-{os}'
      - '{mos_version}-pkg-install-{os}'
      - '{mos_version}-pkg-systest-{os}'
      - '{mos_version}-pkg-massrebuild-starter-{os}'
      - '{mos_version}-pkg-massrebuild-{os}'

- fuel_gerrit_template: &fuel_template
    name: ''

    gerrit-host: 'review.openstack.org'
    gerrit-user: 'openstack-ci-jenkins'
    gerrit-port: '29418'

    install-node: 'fuel-install-node'

    jobs:
      - '{mos_version}-fuel-pkg-pipeline-{distro}'
      - '{mos_version}-fuel-pkg-publish-{distro}'
      - '{mos_version}-fuel-pkg-install-{distro}'

- project:
    name: 'pkg-mos-centos'
    os: 'centos'
    mos_version:
      - 'master':
          distro: 'centos7'
          pkg_type: 'rpm'
          spec_path_prefix: '/centos7'
      - '8.0':
          distro: 'centos7'
          pkg_type: 'rpm'
          spec_path_prefix: '/centos7'
      - '9.0':
          distro: 'centos7'
          pkg_type: 'rpm'
          spec_path_prefix: '/centos7'
    openstack_release: 'CentOS'
    <<: *common_template
    <<: *mos_template

- project:
    name: 'pkg-mos-debian'
    os: 'debian'
    mos_version:
      - 'master':
          distro: 'jessie'
          pkg_type: 'deb'
          spec_path_prefix: '/jessie'
      - '8.0':
          distro: 'jessie'
          pkg_type: 'deb'
          spec_path_prefix: '/jessie'
      - '9.0':
          distro: 'jessie'
          pkg_type: 'deb'
          spec_path_prefix: '/jessie'
    openstack_release: 'Debian'
    <<: *common_template
    <<: *mos_template

- project:
    name: 'pkg-mos-ubuntu'
    os: 'ubuntu'
    mos_version:
      - 'master':
          distro: 'trusty'
          pkg_type: 'deb'
          spec_path_prefix: '/trusty'
      - '8.0':
          distro: 'trusty'
          pkg_type: 'deb'
          spec_path_prefix: '/trusty'
      - '9.0':
          distro: 'trusty'
          pkg_type: 'deb'
          spec_path_prefix: '/trusty'
    openstack_release: 'Ubuntu'
    <<: *common_template
    <<: *mos_template

- project:
    name: 'gate'
    mos_version:
      - 'master'
      - '8.0'
      - '9.0'
    <<: *gerrit_params
    <<: *common_template
    jobs:
      - '{mos_version}-pkg-gate'

- project:
    name: 'pkg-fuel'
    mos_version:
      - 'master'
      - '8.0'
      - '9.0'
    distro:
      - centos7:
          os: centos
          openstack_release: 'CentOS'
          pkg_type: 'rpm'
          spec_path_prefix: '/rpm'
      - trusty:
          os: ubuntu
          openstack_release: 'Ubuntu'
          pkg_type: 'deb'
          spec_path_prefix: '/trusty'
    <<: *common_template
    <<: *fuel_template

- project:
    name: 'maintenace'
    jobs:
      - 'maintain.starter'
      - 'maintain.worker'
    maintain-node: 'new-builder'
    is-disabled: ''
    mailto: 'fuel-build+ci-packaging@mirantis.com'

- project:
    name: 'zuul'
    jobs:
      - 'zuul-maintainer'
    is-disabled: ''
    mailto: 'fuel-build+ci-packaging@mirantis.com'
    scm-user: 'openstack-ci-jenkins'
    scm-credentials-id: 'a2a7e956-9dc7-4eb1-b396-ba981c2a8c81'
    scm-repo: 'fuel-infra/zuul-layouts'
    scm-branch: 'master'
    scm-basedir: ''
    ops-code-prj: 'fuel-infra/**'
    ops-spec-prj: 'fuel-infra/**'
    ops-branch: 'master'
    build-node: 'new-builder'

- project:
    name: 'sync'
    jobs:
      - 'sync_debian_specs'
    scm-user: 'openstack-ci-jenkins'
    scm-credentials-id: 'a2a7e956-9dc7-4eb1-b396-ba981c2a8c81'
    scm-repo: 'infra/mirrors'
    scm-branch: 'master'
    scm-basedir: ''
    sync-node: 'sync-deb-spec'
