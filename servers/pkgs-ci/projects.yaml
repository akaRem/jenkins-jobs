#
# Project definitions
#

- common_template: &common_template
    name: ''

    project-name: 'mos'

    master-mos-version: '9.0'

    main_ubuntu_release: 'trusty'

    repo-host: 'perestroika-repo-tst.infra.mirantis.net'

    base-path: 'base/'
    updates-path: 'updates/'
    security-path: 'security/'

    cr-path-prefix: 'review/'
    rel-path-prefix: 'mos-repos/'

    repo-base-path: '/home/jenkins/pubrepos'

    fuel-namespace: 'openstack'

    install-scm-repo: 'infra/ci-test-request'
    install-scm-branch: 'origin/master'

    spec-path-prefix: ''
    spec-path-suffix: '-build'
    spec-project-prefix: ''
    spec-project-suffix: '-build'

    # Enables paching workflow
    is_updates: 'false'

    # Job slave nodes
    build-node: 'new-builder'
    publish-node: 'new-publisher'
    install-node: 'install-node'
    systest-node: 'systest'

    gerrit-host: 'review.fuel-infra.org'
    gerrit-user: 'openstack-ci-jenkins'
    gerrit-port: '29418'

- project:
    <<: *common_template
    name: 'pkg-mos-master-centos'
    os: 'centos'
    openstack_release: 'ubuntu'
    mos_version: master
    fuel-main-branch: 'master'
    fuel-qa-branch: 'master'
    perestroika-branch: 'master'
    distro: 'centos7'
    pkg_type: 'rpm'
    spec_path_prefix: '/centos7'
    deb-dist-name: mos-master
    rpm-dist-name: mos-master-centos7
    jobs:
      - '{mos_version}-pkg-pipeline-{os}'
      - '{mos_version}-pkg-publish-{os}'
      - '{mos_version}-pkg-install-{os}'
      - '{mos_version}-pkg-repotest-{os}'
      - '{mos_version}-pkg-systest-{os}':
          main-rpm-dist-name: 'mos-master-centos7'
      - '{mos_version}-pkg-massrebuild-starter-{os}'
      - '{mos_version}-pkg-massrebuild-{os}'

- project:
    <<: *common_template
    name: 'pkg-mos-8.0-centos'
    os: 'centos'
    mos_version: '8.0'
    fuel-main-branch: 'stable/8.0'
    fuel-qa-branch: 'stable/8.0'
    perestroika-branch: 'stable/8.0'
    distro: 'centos7'
    pkg_type: 'rpm'
    spec_path_prefix: '/centos7'
    is_updates: 'true'
    openstack_release: 'ubuntu'
    deb-dist-name: mos8.0
    rpm-dist-name: mos8.0-centos7-fuel
    jobs:
      - '{mos_version}-pkg-pipeline-{os}'
      - '{mos_version}-pkg-publish-{os}'
      - '{mos_version}-pkg-install-{os}'
      - '{mos_version}-pkg-repotest-{os}'
      - '{mos_version}-pkg-systest-{os}':
          main-rpm-dist-name: 'mos8.0-centos7-fuel'
      - '{mos_version}-pkg-massrebuild-starter-{os}'
      - '{mos_version}-pkg-massrebuild-{os}'

- project:
    <<: *common_template
    name: 'pkg-mos-9.0-centos'
    os: 'centos'
    mos_version: '9.0'
    fuel-main-branch: 'master'
    fuel-qa-branch: 'master'
    perestroika-branch: 'master'
    distro: 'centos7'
    pkg_type: 'rpm'
    spec_path_prefix: '/centos7'
    openstack_release: 'ubuntu'
    deb-dist-name: mos9.0
    rpm-dist-name: mos9.0-centos7
    jobs:
      - '{mos_version}-pkg-pipeline-{os}'
      - '{mos_version}-pkg-publish-{os}'
      - '{mos_version}-pkg-install-{os}'
      - '{mos_version}-pkg-repotest-{os}'
      - '{mos_version}-pkg-systest-{os}':
          main-rpm-dist-name: mos9.0-centos7
      - '{mos_version}-pkg-massrebuild-starter-{os}'
      - '{mos_version}-pkg-massrebuild-{os}'

- project:
    <<: *common_template
    name: 'pkg-mos-master-ubuntu'
    os: 'ubuntu'
    mos_version: 'master'
    fuel-main-branch: 'master'
    fuel-qa-branch: 'master'
    perestroika-branch: 'master'
    distro: 'trusty'
    pkg_type: 'deb'
    spec_path_prefix: '/trusty'
    openstack_release: 'ubuntu'
    deb-dist-name: mos-master
    rpm-dist-name: mos-master-centos7
    jobs:
      - '{mos_version}-pkg-pipeline-{os}'
      - '{mos_version}-pkg-publish-{os}'
      - '{mos_version}-pkg-install-{os}'
      - '{mos_version}-pkg-repotest-{os}'
      - '{mos_version}-pkg-systest-{os}':
          main-rpm-dist-name: 'mos-master-centos7'
      - '{mos_version}-pkg-massrebuild-starter-{os}'
      - '{mos_version}-pkg-massrebuild-{os}'

- project:
    <<: *common_template
    name: 'pkg-mos-8.0-ubuntu'
    os: 'ubuntu'
    mos_version: '8.0'
    fuel-main-branch: 'stable/8.0'
    fuel-qa-branch: 'stable/8.0'
    perestroika-branch: 'stable/8.0'
    distro: 'trusty'
    pkg_type: 'deb'
    spec_path_prefix: '/trusty'
    is_updates: 'true'
    openstack_release: 'ubuntu'
    deb-dist-name: mos8.0
    rpm-dist-name: mos8.0-centos7-fuel
    jobs:
      - '{mos_version}-pkg-pipeline-{os}'
      - '{mos_version}-pkg-publish-{os}'
      - '{mos_version}-pkg-install-{os}'
      - '{mos_version}-pkg-repotest-{os}'
      - '{mos_version}-pkg-systest-{os}':
          main-rpm-dist-name: 'mos8.0-centos7-fuel'
      - '{mos_version}-pkg-massrebuild-starter-{os}'
      - '{mos_version}-pkg-massrebuild-{os}'

- project:
    <<: *common_template
    name: 'pkg-mos-9.0-ubuntu'
    os: 'ubuntu'
    mos_version: '9.0'
    fuel-main-branch: 'master'
    fuel-qa-branch: 'master'
    perestroika-branch: 'master'
    distro: 'trusty'
    pkg_type: 'deb'
    spec_path_prefix: '/trusty'
    openstack_release: 'ubuntu'
    deb-dist-name: mos9.0
    rpm-dist-name: mos9.0-centos7
    jobs:
      - '{mos_version}-pkg-pipeline-{os}'
      - '{mos_version}-pkg-publish-{os}'
      - '{mos_version}-pkg-install-{os}'
      - '{mos_version}-pkg-repotest-{os}'
      - '{mos_version}-pkg-systest-{os}':
          main-rpm-dist-name: 'mos9.0-centos7'
      - '{mos_version}-pkg-massrebuild-starter-{os}'
      - '{mos_version}-pkg-massrebuild-{os}'

- project:
    <<: *common_template
    name: 'gate'
    mos_version:
      - 'master'
      - '8.0'
      - '9.0'
    jobs:
      - '{mos_version}-pkg-gate'


