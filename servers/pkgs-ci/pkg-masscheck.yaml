- job-template:
    name: '{mos_version}-pkg-masscheck-{os}--{package_name}'
    concurrent: true
    description: |
        This job is worker for mass-check case.<br>
        It builds a package to check that "openstack/*" and "openstack-build/" repos are in consistent state
    node: '{build-node}-{mos_version}-check'
    wrappers:
      - timeout:
          timeout: 300
      - timestamps
      - ansicolor
      - gerrit-creds
    scm:
      - perestroika
    properties:
      - inject:
          properties-content: |
            PKG_TYPE={pkg_type}
            PACKAGENAME={package_name}
    builders:
      - shell:
          !include-raw builders/massrebuild.sh.template
    publishers:
      - archive:
          artifacts: buildresult.params
          allow-empty: true
